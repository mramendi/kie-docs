[id='assembly_openshift-immutable]

include::_artifacts/document-attributes.adoc[]

= Deploying a {PRODUCT} {PRODUCT_VERSION} immutable server environment on {OPENSHIFT}
// Context attribute is assembly specific and enables module reuse between assemblies.
:doctype: book
:imagesdir: _images
:context: openshift-immutable
include::_artifacts/author-group.adoc[]

// Purpose statement for the assembly
As a system engineer, you can deploy a {PRODUCT} immutable server environment on {OPENSHIFT}
to provide an infrastructure to execute processes and other business assets. You can use
standard integration tools to manage the immutable {KIE_SERVER} image. You can create new server images
to add and update processes.

.Prerequisites

* At least four gigabytes of memory are available in the OpenShift environment.
* The OpenShift project for the deployment is created.
* You have logged in to the project using the OpenShift web console and using the `oc` command.
* Dynamic persistent volume (PV) provisioning is enabled. Alternatively, enough persistent volumes are available. By default, the following sizes are required:
** Each immutable server deployment includes a replicated set of {KIE_SERVER} pods, which requires one 1Gi PV for the database. You can deploy multiple immutable servers; each requires a separate 1Gi PV. This requirement does not apply if you use an external database server.
** If you deploy the immutable monitoring template, two 64Mi PVs are also required (one for {CENTRAL} Monitoring and one for Smart Router).

include::{enterprise-dir}/openshift/ba-openshift-overview-con.adoc[leveloffset=+1]
include::{enterprise-dir}/openshift/dm-openshift-prepare-con.adoc[leveloffset=+1]
include::{enterprise-dir}/openshift/imagestreams-file-install-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/secrets-kie-create-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/secrets-central-create-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/glusterfs-reconfig-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/environment-immutable-con.adoc[leveloffset=+1]
include::{enterprise-dir}/openshift/environment-immutable-monitoring-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/environment-immutable-source-extract-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/environment-immutable-server-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/environment-immutable-modify-proc.adoc[leveloffset=+2]
include::{enterprise-dir}/openshift/externaldb-build-proc.adoc[leveloffset=+2]

// Versioning info
include::_artifacts/versioning-information.adoc[]
